<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã€V3.11: æœ€çµ‚ç‰ˆã€‘ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–æ•™æ ç›¸é–¢ä¿‚æ•°</title>
    
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        },
        svg: {
          fontCache: 'global'
        }
      };
    </script>
    <script type="text/javascript" id="MathJax-script" async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
    </script>

    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.8;
            color: #333;
            background-color: #f9f9f9;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: #ffffff;
            padding: 20px 40px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        h1, h2, h3 {
            color: #2c3e50;
        }
        h1 {
            text-align: center;
            font-size: 2em;
        }
        h2 {
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        .section {
            margin-bottom: 40px;
        }
        .highlight {
            color: #e74c3c;
            font-weight: bold;
        }
        /* Example Styles */
        .examples-container {
            display: flex;
            justify-content: space-around;
            text-align: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        .example {
            width: 30%;
            min-width: 200px;
            margin-bottom: 20px;
        }
        .example svg {
            width: 100%;
            height: 180px;
            border: 1px solid #ccc;
            background-color: #fdfdfd;
            border-radius: 5px;
        }
        .example p {
            font-weight: bold;
            margin-top: 5px;
            color: #34495e;
        }

        /* Simulator Styles */
        #chart-wrapper {
            position: relative;
            padding: 30px 10px 10px 40px; /* Space for labels */
        }
        #chart-container {
            position: relative;
            width: 100%;
            height: 400px;
            border: 1px solid #bdc3c7;
            background-color: #fdfdfd;
            cursor: crosshair;
        }
        /* Added axis lines to chart-container for clarity */
        #chart-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 1px;
            height: 100%;
            background-color: #333; /* Y-axis line */
        }
        #chart-container::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 1px;
            background-color: #333; /* X-axis line */
        }

        .axis-label {
            position: absolute;
            font-weight: bold;
            color: #555;
            font-size: 0.9em;
        }
        #y-axis-label {
            transform: rotate(-90deg);
            left: -30px; /* Adjusted position */
            top: 50%;
            transform-origin: 0 0;
            white-space: nowrap;
        }
        #x-axis-label {
            bottom: -30px; /* Adjusted position */
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
        }
        .point {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #3498db;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            border: 1px solid white;
            box-shadow: 0 0 5px rgba(52, 152, 219, 0.8);
        }
        #correlation-value {
            font-size: 1.5em; font-weight: bold; text-align: center; color: #2980b9;
            background-color: #ecf0f1; padding: 15px; border-radius: 5px; margin-top: 10px; transition: background-color 0.3s;
        }
        .controls {
            text-align: center; margin-top: 20px;
        }
        button {
            padding: 10px 20px; font-size: 1em; border: none; border-radius: 5px; cursor: pointer;
            transition: background-color 0.3s ease; margin: 0 10px; color: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        #undo-button { background-color: #3498db; }
        #undo-button:hover { background-color: #2980b9; }
        #clear-button { background-color: #e67e22; }
        #clear-button:hover { background-color: #d35400; }
        
        /* Calculation & Caution Section Styles */
        .formula-box {
            background-color: #ecf0f1;
            padding: 20px;
            border-radius: 5px;
            font-size: 1.2em;
            text-align: center;
            overflow-x: auto;
        }
        .caution {
            background-color: #fff9e6; border-left: 5px solid #f1c40f; padding: 15px; margin-top: 20px; border-radius: 5px;
        }
        .summary-list {
            list-style-type: 'âœ… '; padding-left: 20px;
        }
        
        /* Quiz Section Styles */
        .quiz-question {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 20px;
            margin-bottom: 25px;
            border-radius: 8px;
        }
        details {
            margin-top: 15px;
            background-color: #eaf2f8;
            border-radius: 5px;
            padding: 10px 15px;
        }
        summary {
            font-weight: bold;
            cursor: pointer;
            color: #2980b9;
        }
    </style>
</head>
<body>

<div class="container">

    <h1>GTãƒ‡ãƒ¼ã‚¿ç§‘å­¦ ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–æ•™æ ç›¸é–¢ä¿‚æ•°</h1>

    <div class="section">
        <h2>1. ç›¸é–¢ä¿‚æ•°ã¨ã¯ï¼Ÿ ğŸ“ˆ</h2>
        <p>
            ä¸€è¨€ã§ã„ã†ã¨ã€ç›¸é–¢ä¿‚æ•°ã¨ã¯<b>ã€Œ2ã¤ã®ãƒ‡ãƒ¼ã‚¿ï¼ˆå¤‰æ•°ï¼‰ã®ç›´ç·šçš„ãªé–¢ä¿‚ã®å¼·ã•ã¨æ–¹å‘ã‚’ç¤ºã™æŒ‡æ¨™ã€</b>ã§ã™ã€‚
            ã€Œç‰‡æ–¹ã®ãƒ‡ãƒ¼ã‚¿ãŒå¢—ãˆãŸã¨ãã€ã‚‚ã†ç‰‡æ–¹ã®ãƒ‡ãƒ¼ã‚¿ã¯å¢—ãˆã‚‹å‚¾å‘ã«ã‚ã‚‹ã®ã‹ã€ãã‚Œã¨ã‚‚æ¸›ã‚‹å‚¾å‘ã«ã‚ã‚‹ã®ã‹ã€ã¨ã„ã†é–¢ä¿‚æ€§ã‚’ã€<code>-1</code> ã‹ã‚‰ <code>+1</code> ã¾ã§ã®æ•°å€¤ï¼ˆè¨˜å· $r$ ã§è¡¨ã•ã‚Œã‚‹ï¼‰ã§ç¤ºã—ã¾ã™ã€‚
        </p>
    </div>
    
    <hr>

    <div class="section">
        <h2>2. å…·ä½“çš„ãªä¾‹ã‚’è¦‹ã¦ã¿ã‚ˆã†</h2>
        <p>
            ç›¸é–¢ä¿‚æ•°ã®å€¤ã¨ã‚°ãƒ©ãƒ•ã®è¦‹ãŸç›®ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå¯¾å¿œé–¢ä¿‚ãŒã‚ã‚Šã¾ã™ã€‚
        </p>
        <div class="examples-container">
            <div class="example">
                <svg viewBox="0 0 100 100">
                    <circle cx="20" cy="80" r="2"/><circle cx="25" cy="75" r="2"/><circle cx="30"cy="70" r="2"/><circle cx="35" cy="68" r="2"/><circle cx="40" cy="60" r="2"/><circle cx="45" cy="55" r="2"/><circle cx="50" cy="50" r="2"/><circle cx="55" cy="48" r="2"/><circle cx="60" cy="40" r="2"/><circle cx="65" cy="35" r="2"/><circle cx="70" cy="30" r="2"/><circle cx="75" cy="25" r="2"/><circle cx="80" cy="20" r="2"/>
                </svg>
                <p>å¼·ã„æ­£ã®ç›¸é–¢ (r â‰ˆ +0.9)</p>
            </div>
            <div class="example">
                <svg viewBox="0 0 100 100">
                    <circle cx="20" cy="20" r="2"/><circle cx="25" cy="25" r="2"/><circle cx="30"cy="30" r="2"/><circle cx="35" cy="32" r="2"/><circle cx="40" cy="40" r="2"/><circle cx="45" cy="45" r="2"/><circle cx="50" cy="50" r="2"/><circle cx="55" cy="52" r="2"/><circle cx="60" cy="60" r="2"/><circle cx="65" cy="65" r="2"/><circle cx="70" cy="70" r="2"/><circle cx="75" cy="75" r="2"/><circle cx="80" cy="80" r="2"/>
                </svg>
                <p>å¼·ã„è² ã®ç›¸é–¢ (r â‰ˆ -0.9)</p>
            </div>
            <div class="example">
                <svg viewBox="0 0 100 100">
                    <circle cx="20" cy="50" r="2"/><circle cx="35" cy="25" r="2"/><circle cx="25"cy="70" r="2"/><circle cx="50" cy="80" r="2"/><circle cx="40" cy="40" r="2"/><circle cx="65" cy="60" r="2"/><circle cx="50" cy="20" r="2"/><circle cx="80" cy="45" r="2"/><circle cx="60" cz="75" r="2"/><circle cx="75" cy="30" r="2"/>
                </svg>
                <p>ã»ã¼ç„¡ç›¸é–¢ (r â‰ˆ 0)</p>
            </div>
        </div>
    </div>

    <hr>
    
    <div class="section">
        <h2>3. ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã§ä½“é¨“ã—ã‚ˆã†ï¼ğŸ‘‡</h2>
        <p>
            ä¸‹ã®ã‚¨ãƒªã‚¢ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ç‚¹ã‚’è¿½åŠ ã—ã€ç›¸é–¢ä¿‚æ•°ãŒã©ã†å¤‰ã‚ã‚‹ã‹è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚Xè»¸ã€Yè»¸ã¨ã‚‚ã«å€¤ã¯åŸç‚¹(å·¦ä¸‹)ã‹ã‚‰å³ã€ä¸Šã«å‘ã‹ã£ã¦å¢—ãˆã¾ã™ã€‚
        </p>

        <div id="chart-wrapper">
            <div id="chart-container"></div>
            <div id="y-axis-label" class="axis-label">Yè»¸ (å¤‰æ•°2)</div>
            <div id="x-axis-label" class="axis-label">Xè»¸ (å¤‰æ•°1)</div>
        </div>
        <div id="correlation-value">ç›¸é–¢ä¿‚æ•°: ç‚¹ã‚’è¿½åŠ ã—ã¦ãã ã•ã„</div>
        <div class="controls">
            <button id="undo-button">æœ€å¾Œã®ç‚¹ã‚’å‰Šé™¤</button>
            <button id="clear-button">å…¨ã‚¯ãƒªã‚¢</button>
        </div>
    </div>
    
    <hr>

    <div class="section">
        <h2>4.ã€å‚è€ƒã€‘ç›¸é–¢ä¿‚æ•°ã¯ã©ã†è¨ˆç®—ã™ã‚‹ã®ï¼Ÿ ğŸ§®</h2>
        <p>
            ä¸€èˆ¬çš„ã«ä½¿ã‚ã‚Œã‚‹ã€Œãƒ”ã‚¢ã‚½ãƒ³ã®ç©ç‡ç›¸é–¢ä¿‚æ•°ã€ã¯ã€ä»¥ä¸‹ã®å¼ã§è¨ˆç®—ã•ã‚Œã¾ã™ã€‚
        </p>
        <div class="formula-box">
            $r = \frac{\sum_{i=1}^{n}(x_i - \bar{x})(y_i - \bar{y})}{\sqrt{\sum_{i=1}^{n}(x_i - \bar{x})^2}\sqrt{\sum_{i=1}^{n}(y_i - \bar{y})^2}}$
        </div>
        <ul>
            <li><strong>åˆ†å­ (å¼ã®ä¸Šå´)</strong>: ã€ŒXã®å¹³å‡ã‹ã‚‰ã®ã‚ºãƒ¬ã€ã¨ã€ŒYã®å¹³å‡ã‹ã‚‰ã®ã‚ºãƒ¬ã€ã‚’æ›ã‘åˆã‚ã›ãŸã‚‚ã®ã®åˆè¨ˆã§ã™ã€‚ã“ã‚Œã¯<strong>å…±åˆ†æ•£</strong>ã¨å‘¼ã°ã‚Œã€2ã¤ã®å¤‰æ•°ãŒä¸€ç·’ã«å‹•ãåº¦åˆã„ã‚’ç¤ºã—ã¾ã™ã€‚</li>
            <li><strong>åˆ†æ¯ (å¼ã®ä¸‹å´)</strong>: Xã¨Yãã‚Œãã‚Œã®ã€Œã‚ºãƒ¬ã®å¤§ãã•ï¼ˆæ¨™æº–åå·®ã«é–¢é€£ï¼‰ã€ã§ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€åˆ†å­ã®å€¤ã‚’ã€Œæ­£è¦åŒ–ã€ã—ã€å¿…ãš-1ã‹ã‚‰+1ã®ç¯„å›²ã«åã¾ã‚‹ã‚ˆã†ã«èª¿æ•´ã—ã¦ã„ã¾ã™ã€‚</li>
        </ul>
    </div>

    <hr>
    
    <div class="section">
        <h2>5. æœ€é‡è¦ãƒ«ãƒ¼ãƒ«ï¼šç›¸é–¢ã¯å› æœã§ã¯ãªã„ï¼ âš ï¸</h2>
        <p>
            <span class="highlight">ã€Œç›¸é–¢é–¢ä¿‚ã¯ã€å› æœé–¢ä¿‚ã‚’æ„å‘³ã—ãªã„ã€</span>ã“ã‚Œã¯ãƒ‡ãƒ¼ã‚¿åˆ†æã§æœ€ã‚‚é‡è¦ãªãƒ«ãƒ¼ãƒ«ã®1ã¤ã§ã™ã€‚
        </p>
        <div class="caution">
            <strong>æœ‰åãªä¾‹: ã€Œã‚¢ã‚¤ã‚¹ã‚¯ãƒªãƒ¼ãƒ ã®å£²ä¸Šã€ã¨ã€Œæ°´é›£äº‹æ•…ã®ä»¶æ•°ã€</strong><br>
            ã“ã®2ã¤ã«ã¯å¼·ã„æ­£ã®ç›¸é–¢ãŒã‚ã‚Šã¾ã™ãŒã€ã€Œã‚¢ã‚¤ã‚¹ãŒå£²ã‚Œã‚‹ã‹ã‚‰æ°´é›£äº‹æ•…ãŒå¢—ãˆã‚‹ã€ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚æœ¬å½“ã®åŸå› ã¯ã€ä¸¡è€…ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹<strong>ã€Œæ°—æ¸©ã€</strong>ã¨ã„ã†éš ã‚ŒãŸå¤‰æ•°ï¼ˆäº¤çµ¡å› å­ï¼‰ã§ã™ã€‚
        </div>
    </div>

    <hr>
    
    <div class="section">
        <h2>6. ã¾ã¨ã‚ ğŸ“</h2>
        <ul class="summary-list">
            <li>ç›¸é–¢ä¿‚æ•°ã¯ã€2ã¤ã®ãƒ‡ãƒ¼ã‚¿ã®<span class="highlight">ç›´ç·šçš„ãªé–¢ä¿‚ã®å¼·ã•ã¨æ–¹å‘</span>ã‚’ <code>-1</code> ã‹ã‚‰ <code>+1</code> ã®æ•°å€¤ã§ç¤ºã™ã€‚</li>
            <li>å…¸å‹çš„ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è¦šãˆãŸä¸Šã§ã€ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã§<span class="highlight">ç›´æ„Ÿçš„ãªç†è§£</span>ã‚’æ·±ã‚ã‚‹ã“ã¨ãŒé‡è¦ã€‚</li>
            <li>è¨ˆç®—ã®ä»•çµ„ã¿ã¯ã€å„ãƒ‡ãƒ¼ã‚¿ã®å¹³å‡ã‹ã‚‰ã®<span class="highlight">ã‚ºãƒ¬ï¼ˆåå·®ï¼‰</span>ãŒåŸºæœ¬ã«ãªã£ã¦ã„ã‚‹ã€‚</li>
            <li>ãã—ã¦æœ€ã‚‚é‡è¦ãªã“ã¨ï¼š<span class="highlight">ç›¸é–¢é–¢ä¿‚ã¯å› æœé–¢ä¿‚ã§ã¯ãªã„ï¼</span></li>
        </ul>
    </div>
    
    <hr>

    <div class="section">
        <h2>7. ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã‚¯ã‚¤ã‚º ğŸ†</h2>
        <p>ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã‚’æ“ä½œã—ãªãŒã‚‰ã€ä»¥ä¸‹ã®å•é¡Œã«æŒ‘æˆ¦ã—ã¦ç†è§£åº¦ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¾ã—ã‚‡ã†ã€‚</p>

        <div class="quiz-question">
            <h3>å•1ï¼šç›¸é–¢ã®å¼·ã•ã‚’æ“ã‚ã†ï¼</h3>
            <p>ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã§ã€ä»¥ä¸‹ã®2ã¤ã®æ¡ä»¶ã‚’ãã‚Œãã‚Œæº€ãŸã—ã¦ãã ã•ã„ã€‚</p>
            <ol>
                <li>ç›¸é–¢ä¿‚æ•° $(r)$ ã®å€¤ãŒ <strong>+0.8</strong> ã‚’è¶…ãˆã‚‹çŠ¶æ…‹ã€‚</li>
                <li>ç›¸é–¢ä¿‚æ•° $(r)$ ã®å€¤ãŒ <strong>-0.8</strong> ã‚’ä¸‹å›ã‚‹çŠ¶æ…‹ã€‚</li>
            </ol>
            <details>
                <summary>è§£ç­”ã¨è§£èª¬ã‚’è¦‹ã‚‹</summary>
                <div>
                    <h4>è§£èª¬</h4>
                    <p>1. <strong>(+0.8ä»¥ä¸Š):</strong> ç‚¹ãŒ<strong>ç´°ã„å¸¯çŠ¶ã«ã€ã‹ã¤å³è‚©ä¸ŠãŒã‚Šã®å‚¾å‘</strong>ã§ä¸¦ã‚“ã§ã„ã‚‹ã¯ãšã§ã™ã€‚ç‚¹ãŒç›´ç·šã«è¿‘ã¥ãã»ã©ã€$r$ ã¯+1ã«è¿‘ã¥ãã¾ã™ã€‚</p>
                    <p>2. <strong>(-0.8ä»¥ä¸‹):</strong> ç‚¹ãŒ<strong>ç´°ã„å¸¯çŠ¶ã«ã€ã‹ã¤å³è‚©ä¸‹ãŒã‚Šã®å‚¾å‘</strong>ã§ä¸¦ã‚“ã§ã„ã‚‹ã¯ãšã§ã™ã€‚ç‚¹ãŒç›´ç·šã«è¿‘ã¥ãã»ã©ã€$r$ ã¯-1ã«è¿‘ã¥ãã¾ã™ã€‚</p>
                </div>
            </details>
        </div>

        <div class="quiz-question">
            <h3>å•2ï¼šå¤–ã‚Œå€¤ï¼ˆoutlierï¼‰ã®çµ¶å¤§ãªå½±éŸ¿ï¼</h3>
            <p>
                1. ã¾ãšã€ç‚¹ãŒ5ã€œ6å€‹ã§ã€å¼·ã„æ­£ã®ç›¸é–¢ï¼ˆä¾‹ï¼š$r > +0.9$ï¼‰ã¨ãªã‚‹ã‚ˆã†ã«ã€å³è‚©ä¸ŠãŒã‚Šã®ç›´ç·šã«è¿‘ã„é…ç½®ã‚’ä½œã‚Šã¾ã™ã€‚<br>
                2. æ¬¡ã«ã€ãã®ç‚¹ãŸã¡ã‹ã‚‰å¤§ããé›¢ã‚ŒãŸ<strong>å³ä¸‹</strong>ã®ä½ç½®ã«ã€ç‚¹ã‚’ä¸€ã¤ã ã‘è¿½åŠ ã—ã¾ã™ã€‚
            </p>
            <p><strong>ã€å•é¡Œã€‘</strong> ç‚¹ã‚’è¿½åŠ ã—ãŸå¾Œã€ç›¸é–¢ä¿‚æ•° $(r)$ ã¯ã©ã®ã‚ˆã†ã«å¤‰åŒ–ã—ã¾ã—ãŸã‹ï¼Ÿã¾ãŸã€ãã‚Œã¯ãªãœã ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã‹ï¼Ÿ</p>
            <details>
                <summary>è§£ç­”ã¨è§£èª¬ã‚’è¦‹ã‚‹</summary>
                <div>
                    <h4>è§£ç­”</h4>
                    <p>ç›¸é–¢ä¿‚æ•°ã¯<strong>å¤§å¹…ã«å°ã•ããªã‚Šã¾ã—ãŸ</strong>ï¼ˆ0ã«è¿‘ã¥ãã¾ã—ãŸï¼‰ã€‚</p>
                    <h4>è§£èª¬</h4>
                    <p>ç›¸é–¢ä¿‚æ•°ã¯ã€å…¨ã¦ã®ç‚¹ãŒã©ã‚Œã ã‘ã€Œä¸€æœ¬ã®ç›´ç·šã€ã«æ²¿ã£ã¦ã„ã‚‹ã‹ã‚’è©•ä¾¡ã—ã¾ã™ã€‚åˆã‚ã®å³è‚©ä¸ŠãŒã‚Šã®ç‚¹ã®é›†ã¾ã‚ŠãŒç¤ºå”†ã™ã‚‹ã€Œæ­£ã®é–¢ä¿‚ã€ã«å¯¾ã—ã¦ã€ä¸€ã¤ã ã‘è¿½åŠ ã•ã‚ŒãŸå³ä¸‹ã®ã€Œå¤–ã‚Œå€¤ã€ã¯ã€ãã®å‚¾å‘ã‹ã‚‰å¤§ããå¤–ã‚Œã¦ã„ã¾ã™ã€‚ã“ã®ãŸã£ãŸä¸€ã¤ã®ç‚¹ãŒå…¨ä½“ã®å¹³å‡çš„ãªé–¢ä¿‚æ€§ã‚’å¤§ããæ­ªã‚ã€<strong>å…¨ä½“ã®ç›´ç·šçš„ãªé–¢ä¿‚ã‚’å¼±ã‚ã¦ã—ã¾ã†</strong>ãŸã‚ã€ç›¸é–¢ä¿‚æ•°ãŒ0ã«è¿‘ã¥ãã¾ã™ã€‚ã“ã‚Œã¯ã€å¤–ã‚Œå€¤ãŒãƒ‡ãƒ¼ã‚¿åˆ†æã«ä¸ãˆã‚‹å½±éŸ¿ã®å¤§ãã•ã‚’ç¤ºã™è‰¯ã„ä¾‹ã§ã™ã€‚</p>
                </div>
            </details>
        </div>

        <div class="quiz-question">
            <h3>å•3ï¼šã€Œé–¢ä¿‚æ€§ã€ã¯ã‚ã‚‹ã®ã«ã€Œç›¸é–¢ã€ã¯ã‚¼ãƒ­ï¼Ÿ ğŸ¤”</h3>
            <p>ç‚¹ã‚’10å€‹ä»¥ä¸Šä½¿ã£ã¦ã€ã€Œä½•ã‚‰ã‹ã®ãƒãƒƒã‚­ãƒªã¨ã—ãŸè¦å‰‡æ€§ã‚„é–¢ä¿‚æ€§ãŒã‚ã‚‹ã€ç‚¹ã®é…ç½®ã‚’ä½œã‚‹ã“ã¨ã‚’ç›®æŒ‡ã—ã¦ãã ã•ã„ã€‚ãŸã ã—ã€ãã®çµæœè¡¨ç¤ºã•ã‚Œã‚‹<strong>ç›¸é–¢ä¿‚æ•° $(r)$ ã®å€¤ã¯-0.1ã‹ã‚‰+0.1ã®é–“ï¼ˆã»ã¼0ï¼‰</strong>ã«ãªã‚‹ã‚ˆã†ã«ã—ã¦ãã ã•ã„ã€‚</p>
            <p><strong>ã€å•é¡Œã€‘</strong> ã“ã‚ŒãŒé”æˆã§ããŸå ´åˆã€ãã®ç‚¹ã®é…ç½®ã¯ã©ã®ã‚ˆã†ãªå½¢ã«ãªã£ã¦ã„ã¾ã™ã‹ï¼Ÿãã—ã¦ã€ã“ã®çµæœã‹ã‚‰ã‚ã‹ã‚‹ã€Œç›¸é–¢ä¿‚æ•°ã®é™ç•Œã€ã‚ã‚‹ã„ã¯ã€Œæ³¨æ„ç‚¹ã€ã¨ã¯ä½•ã§ã—ã‚‡ã†ã‹ï¼Ÿ</p>
            <details>
                <summary>è§£ç­”ã¨è§£èª¬ã‚’è¦‹ã‚‹</summary>
                <div>
                    <h4>è§£ç­”</h4>
                    <p><strong>ã€é…ç½®ã®å½¢ã€‘</strong>: Uå­—å‹ï¼ˆäºŒæ¬¡é–¢æ•°ã®ã‚ˆã†ãªå½¢ï¼‰ã€å††å½¢ã€ã‚ã‚‹ã„ã¯å±±å½¢ãªã©ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ã€‚</p>
                    <h4>è§£èª¬</h4>
                    <p>ã“ã®çµæœã‹ã‚‰ã‚ã‹ã‚‹ã®ã¯ã€ã€Œ<span class="highlight">ç›¸é–¢ä¿‚æ•°ã¯ã€ã‚ãã¾ã§2ã¤ã®å¤‰æ•°ã®ã€ç›´ç·šçš„ãªé–¢ä¿‚ã€ã®å¼·ã•ã—ã‹æ¸¬ã‚Œãªã„</span>ã€ã¨ã„ã†é™ç•Œã§ã™ã€‚</p>
                    <p>Uå­—å‹ã®ã‚ˆã†ãªãƒãƒƒã‚­ãƒªã¨ã—ãŸé–¢ä¿‚æ€§ï¼ˆéç·šå½¢ãªé–¢ä¿‚ï¼‰ãŒã‚ã£ã¦ã‚‚ã€å³è‚©ä¸ŠãŒã‚Šã‚„å³è‚©ä¸‹ãŒã‚Šã¨ã„ã£ãŸã€Œç›´ç·šçš„ãªã€å‚¾å‘ã¯ãªã„ãŸã‚ã€ç›¸é–¢ä¿‚æ•°ã¯0ã«è¿‘ã„å€¤ã‚’ç¤ºã—ã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿ã‚’è¦‹ã‚‹éš›ã¯ã€æ•£å¸ƒå›³ã‚’ãƒ—ãƒ­ãƒƒãƒˆã—ã¦<strong>è¦–è¦šçš„ã«é–¢ä¿‚æ€§ã‚’ç¢ºèª</strong>ã—ã€ç›¸é–¢ä¿‚æ•°ã®å€¤ã ã‘ã‚’éµœå‘‘ã¿ã«ã—ãªã„ã“ã¨ãŒéå¸¸ã«é‡è¦ã§ã™ã€‚</p>
                </div>
            </details>
        </div>
    </div>

</div>

<script>
    const chartContainer = document.getElementById('chart-container');
    const correlationValueDisplay = document.getElementById('correlation-value');
    const clearButton = document.getElementById('clear-button');
    const undoButton = document.getElementById('undo-button');
    let points = [];

    // Yåº§æ¨™ã‚’åè»¢ã•ã›ã‚‹ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
    function invertY(y, containerHeight) {
        return containerHeight - y;
    }

    function calculateCorrelation(data) {
        if (data.length < 2) return NaN;
        const n = data.length;
        
        // ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã®è¡¨ç¤ºYåº§æ¨™ã‚’ä¸€èˆ¬çš„ãªã‚°ãƒ©ãƒ•ã®Yåº§æ¨™ã«å¤‰æ›ã—ã¦è¨ˆç®—ã«ä½¿ç”¨
        const transformedData = data.map(p => ({
            x: p.x,
            y: invertY(p.y, chartContainer.clientHeight) 
        }));

        const sumX = transformedData.reduce((acc, p) => acc + p.x, 0);
        const sumY = transformedData.reduce((acc, p) => acc + p.y, 0);
        const meanX = sumX / n;
        const meanY = sumY / n;
        let numerator = 0;
        let sumSqDiffX = 0;
        let sumSqDiffY = 0;
        for (let i = 0; i < n; i++) {
            const diffX = transformedData[i].x - meanX;
            const diffY = transformedData[i].y - meanY;
            numerator += diffX * diffY;
            sumSqDiffX += Math.pow(diffX, 2);
            sumSqDiffY += Math.pow(diffY, 2);
        }
        const denominator = Math.sqrt(sumSqDiffX * sumSqDiffY);
        if (denominator === 0) return NaN;
        return numerator / denominator;
    }

    function updateChart() {
        chartContainer.innerHTML = '';
        points.forEach(p => {
            const pointElement = document.createElement('div');
            pointElement.className = 'point';
            pointElement.style.left = `${(p.x / chartContainer.clientWidth) * 100}%`;
            pointElement.style.top = `${(p.y / chartContainer.clientHeight) * 100}%`; /* è¡¨ç¤ºã¯å…ƒã®Yåº§æ¨™ã®ã¾ã¾ */
            chartContainer.appendChild(pointElement);
        });

        const correlation = calculateCorrelation(points);
        if (points.length < 2) {
            correlationValueDisplay.textContent = `ç›¸é–¢ä¿‚æ•°: å°‘ãªãã¨ã‚‚2ç‚¹å¿…è¦ã§ã™ (${points.length}ç‚¹)`;
            correlationValueDisplay.style.backgroundColor = '#ecf0f1';
        } else if (isNaN(correlation)) {
            correlationValueDisplay.textContent = 'ç›¸é–¢ä¿‚æ•°: è¨ˆç®—ä¸å¯';
            correlationValueDisplay.style.backgroundColor = '#f1c40f';
        } else {
            correlationValueDisplay.textContent = `ç›¸é–¢ä¿‚æ•° (r) = ${correlation.toFixed(4)}`;
            if (correlation > 0.7) correlationValueDisplay.style.backgroundColor = '#d4efdf'; /* Green */
            else if (correlation < -0.7) correlationValueDisplay.style.backgroundColor = '#f5b7b1'; /* Red */
            else correlationValueDisplay.style.backgroundColor = '#eaf2f8'; /* Blue */
        }
    }

    chartContainer.addEventListener('click', (event) => {
        const rect = chartContainer.getBoundingClientRect();
        const x = event.clientX - rect.left;
        const y = event.clientY - rect.top;
        points.push({ x: x, y: y });
        updateChart();
    });

    clearButton.addEventListener('click', () => {
        points = [];
        updateChart();
    });

    undoButton.addEventListener('click', () => {
        if (points.length > 0) {
            points.pop();
            updateChart();
        }
    });
    
    // Initial and resize update
    window.addEventListener('resize', updateChart);
    updateChart();
</script>

</body>
</html>
